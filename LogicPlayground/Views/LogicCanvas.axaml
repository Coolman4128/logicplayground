<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:LogicPlayground.ViewModels"
             xmlns:views="using:LogicPlayground.Views"
             xmlns:behav="clr-namespace:LogicPlayground.Behaviors"
             xmlns:logic="clr-namespace:LogicPlayground.ViewModels.LogicBlocks"
             x:Class="LogicPlayground.Views.LogicCanvas"
             x:DataType="vm:LogicCanvasViewModel"
             >
     <UserControl.DataTemplates>
     <DataTemplate x:DataType="logic:Functions.LogicGateFunctionViewModel">
            <views:LogicGateFunction behav:DragBehavior.EnableDrag="True"/>
        </DataTemplate>
        
        <DataTemplate x:DataType="logic:LogicBlockViewModel">
            <views:LogicBlock behav:DragBehavior.EnableDrag="True"/>
        </DataTemplate>

        
    </UserControl.DataTemplates>

    <!-- view-model namespace: xmlns:vm="clr-namespace:YourApp.ViewModels" -->
<ItemsControl x:Name="BlockItemsControl" ItemsSource="{Binding Blocks}" behav:CanvasMovementBehavior.EnablePan="True">
    <!-- 1. Use a Canvas to lay items out freely -->
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <Canvas Background="#1d1d1dff" Width="3000" Height="2000">
                <Canvas.RenderTransform>
                    <TransformGroup>
                        <ScaleTransform ScaleX="{Binding ZoomLevel, Mode=OneWay}" ScaleY="{Binding ZoomLevel, Mode=OneWay}" />
                        <TranslateTransform X="{Binding CameraOffsetX, Mode=OneWay}" Y="{Binding CameraOffsetY, Mode=OneWay}" />
                    </TransformGroup>
                </Canvas.RenderTransform>
            </Canvas>
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>

    <!-- 2. Style the item *container* so Canvas can read the coords -->
    <ItemsControl.Styles>
        <Style Selector="#BlockItemsControl > ContentPresenter" x:DataType="logic:LogicBlockViewModel">
            <!-- bind to your VM properties -->
            <Setter Property="Canvas.Left" Value="{Binding BlockPositionX}"/>
            <Setter Property="Canvas.Top"  Value="{Binding BlockPositionY}"/>
        </Style>
    </ItemsControl.Styles>

    


   
</ItemsControl>


</UserControl>